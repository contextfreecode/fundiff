FROM docker.io/nvidia/cuda:11.2.2-cudnn8-devel-ubuntu18.04

ENV DEBIAN_FRONTEND noninteractive
RUN apt-get update && apt-get upgrade -y
RUN apt-get install -y llvm-9-dev clang-9 libpng-dev
RUN apt-get install -y git
RUN apt-get install -y curl
RUN apt-get install -y netbase
RUN apt-get install -y pkg-config
RUN bash -c 'curl -sSL https://get.haskellstack.org/ | sh'

RUN git clone https://github.com/google-research/dex-lang.git
RUN cd dex-lang && make
ENV LD_LIBRARY_PATH /usr/local/cuda/compat 
RUN cd dex-lang && make install
